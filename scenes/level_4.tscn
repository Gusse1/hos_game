[gd_scene load_steps=14 format=3 uid="uid://dkfjd2xgmdsu0"]

[ext_resource type="Script" path="res://src/resources/SharedVariables.gd" id="1_72bsp"]
[ext_resource type="PackedScene" uid="uid://bb44urkanokx" path="res://scenes/level_pieces/bottom_fog.tscn" id="2_d5pmq"]
[ext_resource type="PackedScene" uid="uid://qawdt8k11fsu" path="res://scenes/level_pieces/post_process_layer.tscn" id="3_acm6h"]
[ext_resource type="PackedScene" uid="uid://bnyrgg8rmitkf" path="res://scenes/level_pieces/world_environment.tscn" id="4_f27is"]
[ext_resource type="PackedScene" uid="uid://d4u3qwcrc37p" path="res://scenes/level_pieces/background_audio.tscn" id="5_5rk7u"]
[ext_resource type="PackedScene" uid="uid://2t0muetkxk5o" path="res://assets/ui/eye_vid_viewport.tscn" id="6_gb03l"]
[ext_resource type="PackedScene" uid="uid://bk1exu1p74wrs" path="res://addons/GoldGdt/Pawn.tscn" id="6_gfcwf"]
[ext_resource type="PackedScene" uid="uid://wo63bctposbc" path="res://scenes/level_pieces/level_4_battle_area_1.tscn" id="8_md4jd"]
[ext_resource type="PackedScene" uid="uid://by8poq58ac6jv" path="res://assets/interactables/room_trigger.tscn" id="9_bxsi4"]
[ext_resource type="Script" path="res://src/enemy_logic/CombatArea.gd" id="10_m8v76"]
[ext_resource type="PackedScene" uid="uid://bpobx26i0toh0" path="res://assets/enemies/ranger.tscn" id="11_lkrbs"]
[ext_resource type="PackedScene" uid="uid://ckkc3hb2vwwlm" path="res://assets/enemies/ranger_projectile.tscn" id="12_bq1fy"]

[sub_resource type="BoxShape3D" id="BoxShape3D_354w1"]
size = Vector3(99, 54.6509, 79.3114)

[node name="level_4" type="Node3D"]

[node name="SharedVariables" type="Node" parent="." node_paths=PackedStringArray("player_node", "player_body", "player_state", "post_process_layer")]
script = ExtResource("1_72bsp")
player_node = NodePath("../Pawn")
player_body = NodePath("../Pawn/SVC/VC/Body")
player_state = NodePath("../Pawn/PlayerState")
post_process_layer = NodePath("../CanvasLayer")

[node name="BackgroundAudio" parent="." instance=ExtResource("5_5rk7u")]

[node name="FogVolume" parent="." instance=ExtResource("2_d5pmq")]

[node name="WorldEnvironment" parent="." instance=ExtResource("4_f27is")]

[node name="CanvasLayer" parent="." instance=ExtResource("3_acm6h")]

[node name="EyeVidViewport" parent="." instance=ExtResource("6_gb03l")]

[node name="Pawn" parent="." instance=ExtResource("6_gfcwf")]

[node name="Body" parent="Pawn/SVC/VC" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4, 0)

[node name="Interpolated Camera" parent="Pawn/SVC/VC" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.711, 0)

[node name="LevelTerrain" type="Node" parent="."]

[node name="level_4_battle_area_1" parent="LevelTerrain" instance=ExtResource("8_md4jd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -43)

[node name="OmniLight3D" type="OmniLight3D" parent="LevelTerrain/level_4_battle_area_1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 28, 15)
light_color = Color(0.638286, 0, 0.0306298, 1)
light_energy = 25.0
light_indirect_energy = 300.0
omni_range = 85.0

[node name="SpotLight3D" type="SpotLight3D" parent="LevelTerrain/level_4_battle_area_1"]
transform = Transform3D(1, 0, 0, 0, 0.866025, 0.5, 0, -0.5, 0.866025, 0, 38, 38)
light_color = Color(0.638286, 0, 0.0306298, 1)
light_energy = 200.0
light_volumetric_fog_energy = 5.0
shadow_enabled = true
spot_range = 191.0
spot_angle = 38.3062

[node name="CombatAreas" type="Node" parent="."]

[node name="CombatArea1" parent="CombatAreas" node_paths=PackedStringArray("waves") instance=ExtResource("9_bxsi4")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -30.6155, 6.38274, 0.46447)
script = ExtResource("10_m8v76")
waves = [NodePath("Wave1")]

[node name="room_trigger_shape" parent="CombatAreas/CombatArea1" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 43.5775, 0, -36)
shape = SubResource("BoxShape3D_354w1")

[node name="Wave1" type="Node3D" parent="CombatAreas/CombatArea1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 30.6155, -6.38274, -0.46447)

[node name="ranger" parent="CombatAreas/CombatArea1/Wave1" instance=ExtResource("11_lkrbs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 9, -61)

[node name="ranger_projectile" parent="." instance=ExtResource("12_bq1fy")]
transform = Transform3D(8, 0, 0, 0, 8, 0, 0, 0, 8, 1.72286, 15.6376, -24.9437)
visible = false

[connection signal="area_entered" from="CombatAreas/CombatArea1" to="CombatAreas/CombatArea1" method="_on_area_entered"]

[editable path="EyeVidViewport"]
[editable path="Pawn"]
[editable path="CombatAreas/CombatArea1"]
